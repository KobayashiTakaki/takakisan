---
title: "USBメモリにLinuxをインストールしてみた"
date: '2016-06-09'
tags: ['Linux']
---

USBメモリにLinuxをインストールして動かすことができると聞いて、
<br>
面白そうだなとおもってやってみた。
<br>
ので、その流れを紹介します。

インストールするUSBメモリとして、USB3.0で32GBのUSBメモリを用意した。

## インストーラディスクを作成する

OSをインストールするには、インストーラディスクを作成する必要があります。
<br>
インストーラディスクでPCを起動して、インストール先としてUSBメモリを使用します。

Linuxにもいろいろあるようですが、
<br>
デスクトップ環境で利用するディストリビューションとして
<br>
割とポピュラーっぽいUbuntuをインストールすることにしました。

特にこだわりは無いので、
<a href="https://www.ubuntulinux.jp/" target="_blank" target="_blank" rel="noopener noreferrer">Ubuntu Japanese Team</a>
のページから、
<br>
一番新しいバージョン(16.04)のインストーラのisoファイルをダウンロードします。
<br>
こいつを使ってインストーラディスクを作成します。

インストーラディスクを作成するには、isoファイルをDVDに焼くっていう方法もあるんですが、
<br>
今回は手元にあったUSBメモリ（インストール先に使うのとは別）に書き込みました。

USBメモリでインストーラディスクを作成するのに、Rufusというソフトを使いました。
単にisoファイルをメモリにコピーするだけじゃだめなんですね。

## OSのインストール

出来上がったインストールディスクでコンピューターを起動してみます。

インストーラディスクと、インストール先のUSBメモリをPCに刺した状態で電源を入れて、一番最初に出てくる画面でBIOSメニューを開きます。
このPCではescキーを押すと開けます。

![BIOS](bios.jpg)

起動ディスクの選択から、インストーラーを書き込んだUSBメモリを選択します。

![インストーラー](installer1.jpg)

ubuntuのインストーラーが起動しました。

![インストーラー](installer2.jpg)インストールの種類は、「それ以外」を選択。

ディスクのパーティションの設定の画面が出てきます。
<br/>
現在利用している領域を書き換えたりしないよう気をつけましょう。
<br/>
「/dev/sda」ってのが内蔵のハードディスクの領域ですね。


![インストーラー](installer3.jpg)

メモリの最初にFAT32でフォーマットした領域を作っておくと、
<br/>
USBメモリとしてWindowsのマシンとデータやりとりに使えて便利だぞ、
<br/>
という意見を見かけたので、
<br/>
4000MBを/windowsとしてマウント…

USBメモリは書き込み回数に上限があるから、swap領域は作らないほうが良い
<br/>
っていう意見を見かけたが、とりあえず作っといた。
<br/>
4000MBをswap領域に。

残り全部をルートに割り当てた。

ここのブログを参考にしました。
<br/>
<a href="http://cloud-work.net/usb%E3%83%96%E3%83%BC%E3%83%88/usb_install/" target="_blank" rel="noopener noreferrer">UbuntuをUSBメモリにフルインストール。作成/保存したデータをWindowsで読めるようにしてみる。</a>

「ブートローダーをインストールするデバイス」の選択も間違えないようにしよう。
<br/>
ルートに割り当てた領域(/dev/sdb3)を選択した。

![インストーラー](installer4.jpg)

で、あとは適当にポチポチして、待つ。

![USBメモリー](usb.jpg)

こんな感じ。
<br/>
奥がインストーラディスクにしたUSBメモリ。
<br/>
手前の小さいのがインストールするUSBメモリ。

完了したら再起動！
<br/>
起動ディスクを選択して、

![起動画面](boot1.jpg)

が、駄目！
<br/>
bootableじゃないぞ、と。

![パーティション設定](partition.jpg)

3回くらいやり直しして気づいたんですが、
<br/>
ブートローダーを書き込む領域を「論理パーティション」にしてるとだめっぽい？
<br/>
パーティションの設定で「基本パーティション」を選択してインストールすると、

![ブート画面](boot2.jpg)

お、さっきと違う画面が

![デスクトップ](desktoop.jpg)

起動出来ました！
<br/>
とりあえずfirefoxでyoutubeを表示してみた図。

結構サクサク動作します。
<br/>
USB2.0だともっと遅いのかも。

内蔵のディスクを使わずにPCを使えるって、何か不思議な感じですね〜
<br/>
使ってる最中にこのUSBメモリ抜いたらどうなるんだろう…
<br/>
まだ試してません。
